<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MobileVerse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles to supplement Tailwind */
        :root {
            --primary-blue: #3b82f6; /* Modern blue accent color */
        }

        body {
            /* Setting the provided image as a fixed background */
            background-image: url('https://i.imgur.com/Hy9c7uI.jpeg'); /* Using imgur host for image_13.png */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #0a0a0a; /* Fallback color */
            color: #e5e7eb;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        /* Glassmorphism effect for cards and headers so background shows through */
        .glass-panel {
            background: rgba(17, 24, 39, 0.75); /* Dark blue-gray with opacity */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Hide scrollbar for genre list but keep functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Modern search input styling */
        .search-input {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        .search-input:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            outline: none;
        }

        /* Game Card Hover Effect */
        .game-card {
            transition: transform 0.2s ease, border-color 0.2s ease;
        }
        .game-card:active {
            transform: scale(0.98);
        }

        /* Pagination Button Styles */
        .pagination-btn {
            background: rgba(59, 130, 246, 0.2);
            color: var(--primary-blue);
            transition: all 0.2s;
        }
        .pagination-btn:hover:not(:disabled) {
            background: var(--primary-blue);
            color: white;
        }
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(100%);
        }

        /* Ensure views stack correctly for back button fix */
        #main-view, #detail-view {
            width: 100%;
            min-height: 100vh;
        }
        
        #detail-view {
            position: fixed;
            top: 0;
            left: 100%; /* Start off-screen to the right */
            transition: transform 0.3s ease-in-out;
            z-index: 50;
            overflow-y: auto;
        }
        
        #detail-view.active {
            transform: translateX(-100%); /* Slide in */
        }

    </style>
</head>
<body>

    <div id="main-view">
        <header class="sticky top-0 z-10 glass-panel border-b-0 px-4 py-4 shadow-lg">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-2xl font-black italic tracking-wider bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-blue-600">MOBILE<span class="text-white">VERSE</span></h1>
                <i class="fas fa-bars text-xl text-gray-400"></i>
            </div>

            <div class="relative mb-4">
                <i class="fas fa-search absolute left-4 top-3.5 text-gray-500"></i>
                <input type="text" id="searchInput" placeholder="Search 1,700+ unique titles..." class="search-input w-full py-3 pl-12 pr-4 rounded-2xl text-sm text-white placeholder-gray-500">
            </div>

            <div class="flex space-x-3 overflow-x-auto no-scrollbar pb-2">
                <button class="genre-filter active px-6 py-2 rounded-full text-xs font-bold bg-blue-600 text-white whitespace-nowrap" data-genre="all">ALL GAMES</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="action">ACTION</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="rpg">RPG</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="strategy">STRATEGY</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="adventure">ADVENTURE</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="puzzle">PUZZLE</button>
                <button class="genre-filter px-6 py-2 rounded-full text-xs font-bold glass-panel text-gray-300 whitespace-nowrap hover:text-blue-400 transition" data-genre="sports">SPORTS</button>
            </div>
        </header>

        <main class="px-4 py-6 pb-24">
            <div class="flex items-center justify-between mb-6 text-xs font-bold text-gray-400 px-2">
                 <span>DEVICE TIER:</span>
                 <div class="flex space-x-4">
                     <span class="text-white">ANY</span>
                     <span>ENTRY</span>
                     <span>MID</span>
                     <span>HIGH-END</span>
                 </div>
             </div>

             <div id="game-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                </div>

        </main>

        <div class="fixed bottom-0 left-0 right-0 glass-panel p-4 border-t border-white/10 flex justify-between items-center z-20">
            <button id="prevBtn" class="pagination-btn px-6 py-3 rounded-xl font-bold flex items-center space-x-2" disabled>
                <i class="fas fa-chevron-left"></i>
                <span>Back</span>
            </button>
            
            <span id="pageIndicator" class="text-sm font-bold text-blue-400">Page 1 of X</span>

            <button id="nextBtn" class="pagination-btn px-6 py-3 rounded-xl font-bold flex items-center space-x-2">
                <span>Next</span>
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <div id="detail-view" class="glass-panel">
        <div class="sticky top-0 z-20 glass-panel p-4 flex items-center">
            <button id="detailBackBtn" class="text-2xl text-blue-400 pr-4">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h2 id="detailTitle" class="text-xl font-bold truncate">Game Title</h2>
        </div>

        <div class="pb-20">
            <div class="w-full h-64 bg-gradient-to-t from-blue-900/50 to-transparent flex items-end p-6 relative mb-6">
                <img src="https://placehold.co/800x400/1e3a8a/ffffff?text=GAME+BANNER" alt="Banner" class="absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-60">
                <div class="relative z-10">
                    <span id="detailGenre" class="text-xs font-bold text-blue-400 mb-2 block">ACTION</span>
                    <h1 id="detailHeroTitle" class="text-3xl font-black uppercase">Game Title</h1>
                </div>
            </div>

            <div class="px-4">
                <button class="w-full py-4 bg-blue-600 rounded-2xl font-bold text-lg mb-8 shadow-lg shadow-blue-600/30">
                    Download APK <span id="detailSize">(955 MB)</span>
                </button>
                
                <div class="glass-panel rounded-2xl p-6 mb-8">
                    <h3 class="text-lg font-bold mb-4">Additional Info</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between"><span class="text-gray-400">Version</span><span id="detailVersion" class="font-semibold">1.5.78</span></div>
                        <div class="flex justify-between border-t border-white/10 pt-3"><span class="text-gray-400">Requires</span><span class="font-semibold">Android 7.0+</span></div>
                        <div class="flex justify-between border-t border-white/10 pt-3"><span class="text-gray-400">Updated</span><span class="font-semibold">Jan 31, 2026</span></div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-lg font-bold mb-4">About this game</h3>
                    <p id="detailDescription" class="text-gray-300 leading-relaxed">
                        Few games combine atmosphere, emotion, and challenge as well as this title. Dive into a hand-drawn 2D world of hidden secrets and terrifying foes.
                    </p>
                </div>

                <div class="glass-panel rounded-2xl p-6 mb-8">
                     <h3 class="text-lg font-bold mb-4">Rate this app</h3>
                     <div class="flex space-x-2 text-2xl text-blue-400 mb-6">
                         <i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                     </div>
                     <textarea placeholder="Describe your experience (optional)" class="w-full bg-black/30 border border-white/10 rounded-xl p-4 text-sm mb-4 focus:outline-none focus:border-blue-500"></textarea>
                     <button class="px-6 py-3 bg-blue-600 rounded-xl font-bold">Submit Review</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        // 1. DATA SOURCE: Real Game Data Generation
        // Note: To actually have 999+ real, unique games, you would need an external database.
        // For this demo, I am hardcoding about 60 REAL, UNIQUE titles to demonstrate the 20-per-page functionality.
        // This structure scales easily if you connect it to a real large dataset later.

        const realGameTitles = [
            // Action
            "PUBG Mobile", "Call of Duty: Mobile", "Dead Cells", "Grimvalor", "Into the Dead 2", "Honkai Impact 3rd", "Punishing: Gray Raven", "Brawl Stars", "Mech Arena", "T3 Arena",
            // RPG
            "Genshin Impact", "Honkai: Star Rail", "Diablo Immortal", "Stardew Valley", "Chrono Trigger", "Final Fantasy VII", "Octopath Traveler: CotC", "Another Eden", "Guardian Tales", "Epic Seven",
            // Strategy
            "Clash of Clans", "Teamfight Tactics", "Civilization VI", "XCOM 2 Collection", "Northgard", "Bad North", "Bloons TD 6", "Kingdom Rush Vengeance", "Arknights", "Clash Royale",
            // Adventure
            "Hollow Knight", "Little Nightmares", "Sky: Children of the Light", "Monument Valley 2", "Journey", "Limbo", "Inside", "Oxenfree", "Life is Strange", "The Walking Dead",
            // Puzzle
            "Candy Crush Saga", "Royal Match", "Tetris", "The Room 4: Old Sins", "Baba Is You", "Gorogoa", "Monument Valley +", "Cut the Rope", "Bridge Constructor Portal", "World of Goo",
             // Sports
            "eFootball 2024", "EA SPORTS FC Mobile", "NBA 2K Mobile", "Score! Hero", "Rocket League Sideswipe", "Madden NFL 24 Mobile", "Tennis Clash", "Real Racing 3", "Asphalt 9: Legends", "Grid Autosport"
        ];

        const genresList = ['action', 'rpg', 'strategy', 'adventure', 'puzzle', 'sports'];
        let allGamesData = [];

        // Generate the data array from the real titles list
        realGameTitles.forEach((title, index) => {
            // Assign genre based on index position for the demo distribution
            let genreIndex = Math.floor(index / 10); 
            let genre = genresList[genreIndex];

            allGamesData.push({
                id: index + 1,
                title: title,
                genre: genre,
                // Using a placeholder image service that generates images with the game title text
                image: `https://placehold.co/400x600/111827/3b82f6?text=${encodeURIComponent(title.replace(':', ''))}&font=montserrat`,
                size: (Math.random() * 2 + 0.5).toFixed(1) + " GB", // Random realistic size
                version: "v" + (Math.random() * 5 + 1).toFixed(1) + "." + Math.floor(Math.random()*99),
                description: `Experience the definitive mobile version of ${title}. Dive into immersive gameplay with stunning graphics and optimized controls for touchscreen devices.`
            });
        });

        // 2. PAGINATION LOGIC VARIABLES
        const itemsPerPage = 20; // STRICT REQUIREMENT: 20 items only
        let currentPage = 1;
        let currentGenreFilter = 'all';
        let filteredGames = [...allGamesData]; // Start with all games

        // DOM Elements
        const gameGrid = document.getElementById('game-grid');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageIndicator = document.getElementById('pageIndicator');
        const mainView = document.getElementById('main-view');
        const detailView = document.getElementById('detail-view');

        // 3. CORE FUNCTION: Render the grid based on current page and filter
        function renderGrid() {
            gameGrid.innerHTML = ''; // Clear existing content

            // Filter first based on search or genre
            let activeDataset = filteredGames;

            // Calculate start and end indices for pagination
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            
            // Slice the data to get only the 20 items for this page
            const paginatedItems = activeDataset.slice(startIndex, endIndex);

            // Generate HTML cards
            if (paginatedItems.length === 0) {
                 gameGrid.innerHTML = '<p class="col-span-full text-center text-gray-400 py-10">No games found.</p>';
            } else {
                paginatedItems.forEach(game => {
                    const card = document.createElement('div');
                    // Modern glass card style
                    card.className = 'game-card glass-panel rounded-3xl overflow-hidden cursor-pointer group border-b-2 border-transparent hover:border-blue-500';
                    card.onclick = () => openDetailView(game);
                    card.innerHTML = `
                        <div class="relative aspect-[3/4] overflow-hidden">
                            <img src="${game.image}" alt="${game.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 opacity-80 group-hover:opacity-100">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-[#0a0a0a] to-transparent h-1/2"></div>
                            <div class="absolute bottom-4 left-4 right-4">
                                <h3 class="text-lg font-black uppercase leading-tight mb-1 drop-shadow-lg">${game.title}</h3>
                                <span class="text-xs font-bold text-blue-400 uppercase tracking-wider bg-blue-900/30 px-2 py-1 rounded-lg border border-blue-500/30">${game.genre}</span>
                            </div>
                        </div>
                    `;
                    gameGrid.appendChild(card);
                });
            }

            updatePaginationControls(activeDataset.length);
        }

        // 4. PAGINATION CONTROLS UPDATER
        function updatePaginationControls(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            
            // Update text indicator
            pageIndicator.textContent = `Page ${currentPage} of ${totalPages || 1}`;
            
            // Disable/Enable buttons based on current page
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages || totalPages === 0;
        }

        // Event Listeners for Pagination buttons
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderGrid();
                window.scrollTo(0, 0); // Scroll to top on page change
            }
        });

        nextBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(filteredGames.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderGrid();
                window.scrollTo(0, 0);
            }
        });

        // 5. GENRE FILTER LOGIC
        document.querySelectorAll('.genre-filter').forEach(button => {
            button.addEventListener('click', (e) => {
                // Update UI active state
                document.querySelectorAll('.genre-filter').forEach(btn => {
                    btn.classList.remove('active', 'bg-blue-600', 'text-white');
                    btn.classList.add('glass-panel', 'text-gray-300');
                });
                e.target.classList.add('active', 'bg-blue-600', 'text-white');
                e.target.classList.remove('glass-panel', 'text-gray-300');

                // Apply filter data
                const selectedGenre = e.target.dataset.genre;
                currentGenreFilter = selectedGenre;
                currentPage = 1; // Reset to page 1 on filter change

                if (selectedGenre === 'all') {
                    filteredGames = [...allGamesData];
                } else {
                    filteredGames = allGamesData.filter(game => game.genre === selectedGenre);
                }
                renderGrid();
            });
        });

        // Search Logic (Basic implementation)
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            currentPage = 1;
            if(searchTerm === "") {
                 // Reset to current genre filter if search cleared
                 const activeGenreBtn = document.querySelector('.genre-filter.active');
                 activeGenreBtn.click();
            } else {
                filteredGames = allGamesData.filter(game => game.title.toLowerCase().includes(searchTerm));
                renderGrid();
            }
        });


        // =========================================================
        // 6. DETAIL VIEW & HARDWARE BACK BUTTON FIX (CRITICAL REQUIREMENT)
        // =========================================================

        function openDetailView(game) {
            // Populate detail view data
            document.getElementById('detailTitle').textContent = game.title;
            document.getElementById('detailHeroTitle').textContent = game.title;
            document.getElementById('detailGenre').textContent = game.genre;
            document.getElementById('detailDescription').textContent = game.description;
            document.getElementById('detailSize').textContent = `(${game.size})`;
            document.getElementById('detailVersion').textContent = game.version;

            // Slide in the view
            detailView.classList.add('active');
            // Freeze main view scrolling behind it
            document.body.style.overflowY = 'hidden';

            // --- THE HARDWARE BACK BUTTON FIX ---
            // Push a new state to the browser history.
            // This makes the browser think we navigated to a new page without actually reloading.
            window.history.pushState({ view: 'details', gameId: game.id }, '', `#game-${game.id}`);
        }

        function closeDetailView() {
            // Slide out view
            detailView.classList.remove('active');
            document.body.style.overflowY = 'auto';
        }

        // Listen for the 'popstate' event. This fires when the user hits the phone's back button.
        window.addEventListener('popstate', (event) => {
            // If we are currently showing the detail view, close it.
            if (detailView.classList.contains('active')) {
                closeDetailView();
                // NOTE: We do NOT pushState here, going back naturally handles the history removal.
            }
            // If we aren't in detail view, the browser will do its default back behavior (exit site or go to previous website).
        });

        // On-screen back button needs to manually trigger history back to align with hardware button behavior
        document.getElementById('detailBackBtn').addEventListener('click', () => {
             window.history.back();
        });


        // Initialize the app
        // Initial render
        renderGrid();

    </script>
</body>
</html>
